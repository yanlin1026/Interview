<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

- [事务](#事务)
- [事务问题](#事务问题)
- [事务的隔离级别](#事务的隔离级别)
- [索引](#索引)
- [内连接，外连接，自连接](#内连接外连接自连接)
- [mysql存储引擎](#mysql存储引擎)
- [乐观锁与悲观锁](#乐观锁与悲观锁)
- [数据库的锁](#数据库的锁)
<!-- /TOC -->
# 事务   
- Atomicity原子性
  原子性任务是一个独立的操作单元，是一种要么全部是，要么全部不是的原子单位性的操作
- Consistency一致性
  一致性是指在事务开始之前和事务结束以后，数据库的完整性约束没有被破坏。这是说数据库事务不能破坏关系数据的完整性以及业务逻辑上的一致性。
  - **完整性约束**：数据完整性约束指的是为了防止不符合规范的数据进入数据库，在用户对数据进行插入、修改、删除等操作时，DBMS自动按照一定的约束条件对数据进行监测，使不符合规范的数据不能进入数据库，以确保数据库中存储的数据正确、有效、相容。
- Isolation隔离性
  多个事务并发访问时，事务之间是隔离的，一个事务不应该影响其它事务运行效果。
- Durability持久性
  持久性表示一旦一个事务成功了，那么他的改变是永久性的被记录和操作。

# 事务问题
  - 脏读：事务A读取到事务B未提交的数据  
  张三的工资为 5000,事务A中把他的工资改为8000,但事务A尚未提交。与此同时，事务B正在读取张三的工资，读取到张三的工资为 8000。 随后，事务A发生异常，而回滚了事务。张三的工资又回滚为500。最后，事务B读取到的张三工资为 8000 的数据即为脏数据， 事务B做了一次脏读。
  - 不可重复读：在一个事务内两次相同的查询  
  在事务A中，读取到张三的工资为5000，操作没有完成，事务还没提交。
  与此同时，事务B把张三的工资改为8000，并提交了事务。
  随后，在事务A中，再次读取张三的工资，此时工资变为8000。在一个事务中前后两次读取的结果并不致，导致了不可重复读。
  - 幻读
  目前工资为5000 的员工有10人，事务A读取所有工资为5000的人数为
  10 人。 此时， 事务 B 插入一条工资也为 5000 的记录。 这是， 事务 A 再次读取
  工资为 5000 的员工， 记录为 11 人。 此时产生了幻读。
  - 不可重复读的重点是修改：
  同样的条件，你读取过的数据再次读取出来发现值不一样了。
  - 幻读的重点在于新增或者删除：
  同样的条件， 第 1 次和第 2 次读出来的记录数不一样。

# 事务的隔离级别
    - 读未提交：脏读，不可重复读，幻读
    - 读已提交：不可重复读，幻读
    - 可重复读：mysql默认，幻读
    - 可串行化：性能较差

# 索引  
数据库中排序的数据结构，协助快速查询，更新的操作，数据的实现一般是B树或者B+树
    - 增加数据库的物理存储空间
    - 插入和修改数据时要花费较多的时间（索引的位置也要变动）
    - 维护索引需要耗费时间，随着数据量的增加而增加  
优点：
    - 唯一索引可以保证数据的唯一性
    - 查询速度加快
    - 在查询中使用索引，可以提高性能  
使用：
    - 在经常需要搜索的列上，加快检索速度
    - 主键确保唯一性
    - 需要排序的字段上简历索引  

# 内连接，外连接，自连接
  - 内连接:求两张表之间的交集，在A中出现也在B中出现
  - 左外连接：求两张表之间的交集，在A中出现，B中没有出现，没有出现的用null代替   
  左外连接，也称左连接，左表为主表，左表中的所有记录都会出现在结果集中，对于那些在右表中并没有匹配的记录，仍然要显示，右边对应的那些字段值以NULL来填充。
  - 右外连接：求两张表之间的交集，在A中没有出现，B中出现，没有出现的用null代替
  也称右连接，右表为主表，右表中的所有记录都会出现在结果集中。左连接和右连接可以互换，MySQL目前还不支持全外连接。

# mysql存储引擎
- InnoDB  

- MyISAM

# 乐观锁与悲观锁
  - 乐观锁：  
  认为每次读取数据的时候，认为不会修改数据，一般适合读数据比较大的时候，一般采用版本号进行加锁
  - 悲观锁：  
  认为每次读取数据时候都认为别人会修改，每次读取的时候都会上锁，基于数据库的锁机制，比如行锁，表锁，读锁，写锁等
# 数据库的锁
  -
